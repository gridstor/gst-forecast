import{at as F,au as M,av as S,aw as R,ax as E,ay as W,az as L,aA as J,aB as H,aC as I,t as $,o as m,b as k,e as a,F as N,Z as O,x as P,i as j,l as V,A as _,aD as U,c as Z,k as q,q as G,s as K}from"./modules/vue-DUIs0fbu.js";import{u as D,p as Q,f as X}from"./slidev/context-9WSQiIrd.js";import{p as Y}from"./chartjs-plugin-datalabels.esm-C0OK1XYl.js";import{l as ee,H as C}from"./index-DRVGoXVi.js";import{I as te}from"./slidev/default-86220qWo.js";import"./modules/shiki-Dfhzjfbi.js";const ae={class:"chart-wrapper"},oe={class:"p-value-container"},se={class:"p-value-table"},ie={class:"month"},re={class:"p-value"},ne={class:"chart-content"},le={__name:"HoustonCalibrationChart",setup(T){D(),F.register(M,S,R,E,W,L,J,H,I,Y);const i=$({labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Probability Range",backgroundColor:"#0B2B5B33",barPercentage:.3,data:[{x:"Jan",y:[6.18*.4,6.18*1.6],p50:6.18*.85,whisker:[6.18*.2,6.18*2.4],pValue:"P45"},{x:"Feb",y:[1.42*.8,1.42*3.2],p50:1.42*1.4,whisker:[1.42*.4,1.42*3.6],pValue:"P42"},{x:"Mar",y:[3*.4,3*1.8],p50:3*1.08,whisker:[3*.3,3*2],pValue:"P48"},{x:"Apr",y:[4.85*.4,4.85*1.7],p50:4.85*.93,whisker:[4.85*.3,4.85*1.9],pValue:"P52"},{x:"May",y:[12.57*.45,12.57*1.15],p50:12.57*.75,whisker:[12.57*.25,12.57*1.35],pValue:"P80"},{x:"Jun",y:[3.43*.4,3.43*2.2],p50:3.43*1.25,whisker:[3.43*.2,3.43*2.6],pValue:"P38"},{x:"Jul",y:[2*1.03,2*3.07],p50:2*1.75,whisker:[2*.41,2*4.02],pValue:"P35"},{x:"Aug",y:[6.68*.6,6.68*2],p50:6.68*1.12,whisker:[6.68*.4,6.68*2.4],pValue:"P55"},{x:"Sep",y:[2.03*.9,2.03*3.1],p50:2.03*1.75,whisker:[2.03*.7,2.03*4.2],pValue:"P32"},{x:"Oct",y:[3.99*.4,3.99*2],p50:3.99*1.15,whisker:[3.99*.2,3.99*2.4],pValue:"P42"},{x:"Nov",y:[2.58*.4,2.58*2],p50:2.58*1.15,whisker:[2.58*.2,2.58*3],pValue:"P38"},{x:"Dec",y:[1.68*.4,1.68*2.2],p50:1.68*1.45,whisker:[1.68*.2,1.68*2.6],pValue:"P35"}],type:"bar",order:2},{label:"P50 Forecast",backgroundColor:"#0B2B5B",borderColor:"#0B2B5B",data:[6.18*.85,1.42*1.4,3*1.08,4.85*.93,12.57*.65,3.43*1.25,2*2.5,6.68*1.12,2.03*2.6,3.99*1.15,2.58*1.15,1.68*1.45],type:"line",borderWidth:2,pointRadius:4,order:1},{label:"2024 Actuals",backgroundColor:"rgba(255, 99, 132, 0.5)",borderColor:"rgba(255, 99, 132, 0.5)",data:[6.18,1.42,3,4.85,12.57,3.43,2,6.68,2.03,3.99,2.58,1.68],type:"line",borderWidth:2,borderDash:[5,5],pointStyle:"circle",pointRadius:6,order:0}]}),c=$({maintainAspectRatio:!1,responsive:!0,animation:!1,layout:{padding:{top:15,right:15,bottom:10,left:10}},plugins:{datalabels:{display:!1},legend:{display:!0,position:"top",align:"center",labels:{boxWidth:6,padding:3,font:{size:8}}},tooltip:{callbacks:{label:function(t){const s=t.dataset.label||"";if(t.parsed.y!==null){if(t.dataset.type==="bar"){const o=t.dataset.data[t.dataIndex];return[`${s} P25: $${o.y[0].toFixed(2)}`,`${s} P75: $${o.y[1].toFixed(2)}`,`P50: $${o.p50.toFixed(2)}`,`P5: $${o.whisker[0].toFixed(2)}`,`P95: $${o.whisker[1].toFixed(2)}`,`Actual: ${o.pValue}`]}return`${s}: $${t.parsed.y.toFixed(2)}`}return s}}}},scales:{y:{grid:{drawBorder:!1},beginAtZero:!0,title:{display:!0,text:"$/kw-mn",color:"#0B2B5B",font:{size:8},padding:{bottom:5}},ticks:{color:"#0B2B5B",font:{size:8},padding:3}},x:{grid:{display:!1,drawBorder:!1},ticks:{color:"#0B2B5B",font:{size:8},padding:3}}}}),b={id:"boxWhisker",beforeDatasetsDraw:(t,s,o)=>{const{ctx:e}=t;t.data.datasets.forEach((l,f)=>{var r;if(!((r=l.data[0])!=null&&r.whisker))return;const p=t.getDatasetMeta(f);p.visible&&l.data.forEach((d,y)=>{if(!d.whisker)return;const u=p.data[y];if(!u)return;const{x:n}=u.getCenterPoint(),x=t.scales.y,v=x.getPixelForValue(d.whisker[0]),w=x.getPixelForValue(d.whisker[1]);e.save(),e.lineWidth=2,e.strokeStyle="rgba(11, 43, 91, 0.25)",e.beginPath(),e.moveTo(n-12,w),e.lineTo(n+12,w),e.moveTo(n-12,v),e.lineTo(n+12,v),e.stroke(),e.beginPath(),e.moveTo(n,v),e.lineTo(n,w),e.stroke(),e.restore(),e.save();const h=6;e.fillStyle="#666666";const g=x.getPixelForValue((d.y[0]+d.y[1])/2);e.beginPath(),e.moveTo(n,g-h),e.lineTo(n+h,g),e.lineTo(n,g+h),e.lineTo(n-h,g),e.closePath(),e.fill(),e.restore()})})}};F.register(b);const A=()=>{const t=["Month","Box Low (P25)","Box High (P75)","Month Midpoint","P50 Forecast","Whisker Low (P5)","Whisker High (P95)","2024 Actual","P-Value"].join(","),s=i.value.labels.map((f,p)=>{const r=i.value.datasets[0].data[p],d=i.value.datasets[1].data[p],y=i.value.datasets[2].data[p],u=(r.y[0]+r.y[1])/2;return[f,r.y[0].toFixed(2),r.y[1].toFixed(2),u.toFixed(2),d.toFixed(2),r.whisker[0].toFixed(2),r.whisker[1].toFixed(2),y.toFixed(2),r.pValue].join(",")}),o="data:text/csv;charset=utf-8,"+[t,...s].join(`
`),e=encodeURI(o),l=document.createElement("a");l.setAttribute("href",e),l.setAttribute("download","houston_calibration_data.csv"),document.body.appendChild(l),l.click(),document.body.removeChild(l)},B=t=>{const s=i.value.datasets[2].data[t],e=i.value.datasets[0].data[t].p50;return s-e},z=t=>Math.abs(t)<.01?"$0.00":t>0?`+$${t.toFixed(2)}`:`-$${Math.abs(t).toFixed(2)}`;return(t,s)=>(m(),k("div",ae,[a("div",oe,[s[0]||(s[0]=a("div",{class:"p-value-title"},"P-value of Actual Outcome vs. Forecast Probability Range",-1)),a("div",se,[(m(!0),k(N,null,O(i.value.labels,(o,e)=>(m(),k("div",{key:o,class:"p-value-cell"},[a("div",ie,P(o),1),a("div",re,P(i.value.datasets[0].data[e].pValue),1),a("div",{class:j(["difference",{positive:B(e)>0}])},P(z(B(e))),3)]))),128))])]),a("button",{class:"download-btn",onClick:A}," Download Data "),a("div",ne,[V(_(U),{data:i.value,options:c.value},null,8,["data","options"])])]))}},de=ee(le,[["__scopeId","data-v-b96a0fd9"]]),ce={style:{"text-align":"center",padding:"15px 40px"}},fe={__name:"3",setup(T){return Q(C),D(),(i,c)=>{const b=de;return m(),Z(te,G(K(_(X)(_(C),2))),{default:q(()=>[a("div",ce,[c[0]||(c[0]=a("h1",{style:{"font-size":"24px",color:"#444444","font-weight":"500","margin-bottom":"15px","line-height":"1.2"}},"2024 Forecast using actuals as inputs vs. ERCOT prices",-1)),c[1]||(c[1]=a("div",{style:{"max-width":"1200px",margin:"0 auto","text-align":"left",padding:"0 20px"}},[a("ul",{style:{margin:"0 0 10px 0","padding-left":"25px"}},[a("li",{style:{"font-size":"12px",color:"#555555","margin-bottom":"8px","line-height":"1.3"}},"We used actual 2024 load, solar, natural gas, etc. and ran our internal model. The actuals averaged $4.20/kw-mn, with significant monthly variation from $1.42 to $12.57/kw-mn."),a("li",{style:{"font-size":"12px",color:"#555555","margin-bottom":"8px","line-height":"1.3"}},"The average P-value of actuals in the forecast range was P45, with monthly values ranging from P32 to P80."),a("li",{style:{"font-size":"12px",color:"#555555","margin-bottom":"8px","line-height":"1.3"}},"7 months were under forecasted, with May showing the largest deviation."),a("li",{style:{"font-size":"12px",color:"#555555","margin-bottom":"8px","line-height":"1.3"}},"Recommendation: No de-biasing of the forecast. The P45 average suggests good calibration, but with high monthly variability, which is expected for ERCOT.")])],-1)),V(b)])]),_:1},16)}}};export{fe as default};
