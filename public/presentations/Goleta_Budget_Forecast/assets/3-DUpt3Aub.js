import{at as _,au as T,av as S,aw as W,ax as R,ay as E,az as M,aA as I,aB as J,t as P,o as d,b as m,e as o,F as L,Z as N,x as b,i as O,l as $,A as f,aC as j,c as G,k as U,q as Z,s as q}from"./modules/vue-CLdSbzWw.js";import{u as C,p as H,f as Y}from"./slidev/context-C0N3ICM_.js";import{p as K}from"./chartjs-plugin-datalabels.esm-DYID96a6.js";import{l as Q,H as B}from"./index-C1ojEdyF.js";import{I as X}from"./slidev/default-B-Io2ZjB.js";import"./modules/shiki-DM7uYPJp.js";const ee={class:"chart-wrapper"},te={class:"p-value-container"},ae={class:"p-value-table"},oe={class:"month"},se={class:"p-value"},re={class:"chart-content"},ie={__name:"GoletaCalibrationChart",setup(F){C(),_.register(T,S,W,R,E,M,I,J,K);const v={id:"boxWhisker",beforeDatasetsDraw:(t,r,a)=>{const{ctx:e}=t;t.data.datasets.forEach((l,p)=>{var k;if(!((k=l.data[0])!=null&&k.whisker))return;const y=t.getDatasetMeta(p);y.visible&&l.data.forEach((n,D)=>{if(!n.whisker)return;const z=y.data[D],{x:i}=z.getCenterPoint(),u=t.scales.y,g=u.getPixelForValue(n.whisker[0]),h=u.getPixelForValue(n.whisker[1]);e.save(),e.lineWidth=2,e.strokeStyle="rgba(11, 43, 91, 0.25)",e.beginPath(),e.moveTo(i-12,h),e.lineTo(i+12,h),e.moveTo(i-12,g),e.lineTo(i+12,g),e.stroke(),e.beginPath(),e.moveTo(i,g),e.lineTo(i,h),e.stroke(),e.restore(),e.save(),e.strokeStyle="#0B2B5B",e.lineWidth=3;const w=u.getPixelForValue(n.p50);e.beginPath(),e.moveTo(i-15,w),e.lineTo(i+15,w),e.stroke(),e.restore()})})}};_.register(v);const s=P({labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"Probability Range",backgroundColor:"#0B2B5B33",barPercentage:.3,data:[{x:"Jan",y:[3.3*.55,3.3*1.3],p50:3.3*1.05,whisker:[3.3*.35,3.3*1.5],pValue:"P57"},{x:"Feb",y:[3.49*.65,3.49*1.4],p50:3.49*.95,whisker:[3.49*.45,3.49*1.6],pValue:"P47"},{x:"Mar",y:[5.76*.63,5.76*1.18],p50:5.76*1.08,whisker:[5.76*.45,5.76*1.4],pValue:"P60"},{x:"Apr",y:[5.75*.65,5.75*1.2],p50:5.75*.93,whisker:[5.75*.45,5.75*1.4],pValue:"P55"},{x:"May",y:[4.44*.8,4.44*1.4],p50:4.44*1.06,whisker:[4.44*.6,4.44*1.6],pValue:"P43"},{x:"Jun",y:[3.2*.6,3.2*1.8],p50:3.2*1.25,whisker:[3.2*.35,3.2*2.3],pValue:"P40"},{x:"Jul",y:[6.16*.6,6.16*1.23],p50:6.16*1.12,whisker:[6.16*.45,6.16*1.45],pValue:"P55"},{x:"Aug",y:[4.1*.8,4.1*1.6],p50:4.1*1.12,whisker:[4.1*.6,4.1*2],pValue:"P35"},{x:"Sep",y:[4.74*.9,4.74*1.7],p50:4.74*1.15,whisker:[4.74*.7,4.74*2],pValue:"P28"},{x:"Oct",y:[3.28*.5,3.28*1.55],p50:3.28*1.15,whisker:[3.28*.25,3.28*2.1],pValue:"P45"},{x:"Nov",y:[3.06*.6,3.06*1.5],p50:3.06*1.15,whisker:[3.06*.4,3.06*1.8],pValue:"P45"},{x:"Dec",y:[1.9*.5,1.9*1.85],p50:1.9*1.45,whisker:[1.9*.25,1.9*2.5],pValue:"P40"}],type:"bar",order:2},{label:"P50 Forecast",backgroundColor:"#0B2B5B",borderColor:"#0B2B5B",data:[3.3*1.05,3.49*.95,5.76*1.08,5.75*.93,4.44*1.06,3.2*1.25,6.16*1.12,4.1*1.12,4.74*1.15,3.28*1.15,3.06*1.15,1.9*1.45],type:"line",borderWidth:2,pointRadius:4,order:1},{label:"2024 Actuals",backgroundColor:"rgba(255, 99, 132, 0.5)",borderColor:"rgba(255, 99, 132, 0.5)",data:[3.3,3.49,5.76,5.75,4.44,3.2,6.16,4.1,4.74,3.28,3.06,1.9],type:"line",borderWidth:2,borderDash:[5,5],pointStyle:"circle",pointRadius:6,order:0}]}),c=P({maintainAspectRatio:!1,responsive:!0,layout:{padding:{top:15,right:15,bottom:10,left:10}},plugins:{boxWhisker:{enabled:!0},datalabels:{display:!1},legend:{display:!0,position:"top",align:"center",labels:{boxWidth:6,padding:3,font:{size:8}}},tooltip:{callbacks:{label:function(t){const r=t.dataset.label||"";if(t.parsed.y!==null){if(t.dataset.type==="bar"){const a=t.dataset.data[t.dataIndex];return[`${r} P25: $${a.y[0].toFixed(2)}`,`${r} P75: $${a.y[1].toFixed(2)}`,`P50: $${a.p50.toFixed(2)}`,`P5: $${a.whisker[0].toFixed(2)}`,`P95: $${a.whisker[1].toFixed(2)}`,`Actual: ${a.pValue}`]}return`${r}: $${t.parsed.y.toFixed(2)}`}return r}}}},scales:{y:{grid:{drawBorder:!1},beginAtZero:!0,title:{display:!0,text:"$/kw-mn",color:"#0B2B5B",font:{size:8},padding:{bottom:5}},ticks:{color:"#0B2B5B",font:{size:8},padding:3}},x:{grid:{display:!1,drawBorder:!1},ticks:{color:"#0B2B5B",font:{size:8},padding:3}}}}),V=()=>{const t="data:text/csv;charset=utf-8,"+s.value.labels.map((e,l)=>`${e},${s.value.datasets.map(p=>p.data[l]).join(",")}`).join(`
`),r=encodeURI(t),a=document.createElement("a");a.setAttribute("href",r),a.setAttribute("download","goleta_calibration.csv"),document.body.appendChild(a),a.click(),document.body.removeChild(a)},x=t=>{const r=s.value.datasets[2].data[t],a=s.value.datasets[0].data[t],e=(a.y[0]+a.y[1])/2;return r-e},A=t=>t>0?`+$${t.toFixed(2)}`:`-$${Math.abs(t).toFixed(2)}`;return(t,r)=>(d(),m("div",ee,[o("div",te,[r[0]||(r[0]=o("div",{class:"p-value-title"},"P-value of Actual Outcome vs. Forecast Probability Range",-1)),o("div",ae,[(d(!0),m(L,null,N(s.value.labels,(a,e)=>(d(),m("div",{key:a,class:"p-value-cell"},[o("div",oe,b(a),1),o("div",se,b(s.value.datasets[0].data[e].pValue),1),o("div",{class:O(["difference",{positive:x(e)>0}])},b(A(x(e))),3)]))),128))])]),o("button",{class:"download-btn",onClick:V}," Download Data "),o("div",re,[$(f(j),{data:s.value,options:c.value},null,8,["data","options"])])]))}},le=Q(ie,[["__scopeId","data-v-21eecfc8"]]),ne={style:{"text-align":"center",padding:"15px 40px"}},me={__name:"3",setup(F){return H(B),C(),(v,s)=>{const c=le;return d(),G(X,Z(q(f(Y)(f(B),2))),{default:U(()=>[o("div",ne,[s[0]||(s[0]=o("h1",{style:{"font-size":"24px",color:"#444444","font-weight":"500","margin-bottom":"15px","line-height":"1.2"}},"2024 Forecast using actuals as inputs vs. Actual CAISO prices",-1)),s[1]||(s[1]=o("div",{style:{"max-width":"1200px",margin:"0 auto","text-align":"left",padding:"0 20px"}},[o("ul",{style:{margin:"0 0 10px 0","padding-left":"25px"}},[o("li",{style:{"font-size":"12px",color:"#555555","margin-bottom":"8px","line-height":"1.3"}},"We used actual 2024 load, solar, natural gas, etc. and ran our internal model. The actuals were $4.10/kw-mn, the forecast model with actual inputs gave $4.53/kw-mn, about 9% above the actual value."),o("li",{style:{"font-size":"12px",color:"#555555","margin-bottom":"8px","line-height":"1.3"}},"The P-value of actuals in the forecast range was P45 forecast, with an average error of $0.45/kw-mn."),o("li",{style:{"font-size":"12px",color:"#555555","margin-bottom":"8px","line-height":"1.3"}},"8 months would have been over forecasted, 4 months would have been under forecasted."),o("li",{style:{"font-size":"12px",color:"#555555","margin-bottom":"8px","line-height":"1.3"}},"Recommendation: No de-biasing of the forecast. Averaging a P45 forecast, is in line with expectations of forecast error, about 9% above actuals.")])],-1)),$(c)])]),_:1},16)}}};export{me as default};
