import{_ as J,a as K,b as O,c as X,d as Z}from"../modules/unplugin-icons-DndU6RAj.js";import{t as R,d as P,c as k,i as _,A as t,o as c,y as v,b,e,l as i,F as B,x as z,g as I,Z as Q,a1 as Y,a2 as ee,h as F,D as q,M as te,_ as se,J as oe,a3 as ne,a4 as le,k as $,a5 as ae}from"../modules/vue-DUIs0fbu.js";import{j as re,k as ie,r as ce,C as ue,l as U,u as de,c as A,h as pe,m as me,b as ve,n as _e,g as fe}from"../index-7vEf53fr.js";import{r as xe,u as ke,_ as G,a as H,b as be,S as ge,c as ye,G as Ce}from"./SlidesShow-CB3ZhutG.js";import{s as we,b as V,p as he,S as Se,c as $e,i as ze,d as Fe}from"./bottom-Dy2nN3Ou.js";import{_ as Ne}from"./NoteDisplay.vue_vue_type_style_index_0_lang-B4jFl2wo.js";import{_ as Me}from"./DrawingControls.vue_vue_type_style_index_0_lang-C9AaJaJ8.js";import{u as De}from"./DrawingPreview.vue_vue_type_script_setup_true_lang-FumAaIl4.js";import"../modules/shiki-Dfhzjfbi.js";import"./context-a7RWFoMh.js";function Te(f){var n;return{info:R((n=re(f))==null?void 0:n.meta.slide),update:async()=>{}}}const Ve=P({__name:"NoteStatic",props:{no:{},class:{},clicksContext:{}},setup(f){const n=f,{info:s}=Te(n.no);return(d,u)=>{var o,x;return c(),k(Ne,{class:_(n.class),note:(o=t(s))==null?void 0:o.note,"note-html":(x=t(s))==null?void 0:x.noteHTML,"clicks-context":d.clicksContext},null,8,["class","note","note-html","clicks-context"])}}}),Re=["title"],Be={class:"flex gap-0.5 items-center min-w-16 font-mono mr1"},Ie={"text-primary":""},Pe={op50:""},Le=["min","max"],je=P({__name:"ClicksSlider",props:{clicksContext:{}},setup(f){const n=f,s=v(()=>n.clicksContext.total),d=v(()=>ie(0,n.clicksContext.clicksStart,s.value)),u=v(()=>s.value-d.value+1),o=v({get(){return n.clicksContext.current>s.value?-1:n.clicksContext.current},set(g){n.clicksContext.current=g}}),x=v(()=>ce(d.value,s.value+1));function N(){(o.value<0||o.value>s.value)&&(o.value=0)}return(g,r)=>{const M=J;return c(),b("div",{class:_(["flex gap-1 items-center select-none",u.value?"":"op50"]),title:`Clicks in this slide: ${u.value}`},[e("div",Be,[i(M,{"text-sm":"",op50:""}),r[4]||(r[4]=e("div",{"flex-auto":""},null,-1)),o.value>=0&&o.value!==t(ue)?(c(),b(B,{key:0},[e("span",Ie,z(o.value),1),r[3]||(r[3]=e("span",{op25:""},"/",-1))],64)):I("",!0),e("span",Pe,z(s.value),1)]),e("div",{relative:"","flex-auto":"",h5:"","font-mono":"",flex:"~",onDblclick:r[2]||(r[2]=l=>o.value=g.clicksContext.total)},[(c(!0),b(B,null,Q(x.value,l=>(c(),b("div",{key:l,border:"y main","of-hidden":"",relative:"",class:_([l===0?"rounded-l border-l":"",l===s.value?"rounded-r border-r":""]),style:F({width:u.value>0?`${1/u.value*100}%`:"100%"})},[e("div",{absolute:"","inset-0":"",class:_(l<=o.value?"bg-primary op15":"")},null,2),e("div",{class:_([+l==+o.value?"text-primary font-bold op100 border-primary":"op30 border-main",l===0?"rounded-l":"",l===s.value?"rounded-r":"border-r-2"]),"w-full":"","h-full":"","text-xs":"",flex:"","items-center":"","justify-center":"","z-1":""},z(l),3)],6))),128)),Y(e("input",{"onUpdate:modelValue":r[0]||(r[0]=l=>o.value=l),class:"range",absolute:"","inset-0":"",type:"range",min:d.value,max:s.value,step:1,"z-10":"",op0:"",style:F({"--thumb-width":`${1/(u.value+1)*100}%`}),onMousedown:N,onFocus:r[1]||(r[1]=l=>{var w;return(w=l.currentTarget)==null?void 0:w.blur()})},null,44,Le),[[ee,o.value]])],32)],10,Re)}}}),qe=U(je,[["__scopeId","data-v-7cb73d45"]]),Ae={class:"bg-main h-full slidev-presenter"},Ge={class:"relative grid-section next flex flex-col p-2 lg:p-4"},He={key:1,class:"grid-section note grid grid-rows-[1fr_min-content] overflow-hidden"},Ue={class:"border-t border-main py-1 px-2 text-sm"},We={class:"grid-section bottom flex"},Ee={class:"text-2xl pl-2 pr-6 my-auto tabular-nums"},Je={class:"progress-bar"},Ke=P({__name:"presenter",setup(f){const n=R();xe(),ke(n);const{clicksContext:s,currentSlideNo:d,currentSlideRoute:u,hasNext:o,nextRoute:x,slides:N,queryClicks:g,getPrimaryClicks:r,total:M}=de(),{isDrawing:l}=De(),w=A.titleTemplate.replace("%s",A.title||"Slidev");pe({title:`Presenter - ${w}`}),R(!1);const{timer:W,resetTimer:L}=me(),E=v(()=>N.value.map(S=>ve(S))),p=v(()=>s.value.current<s.value.total?[u.value,s.value.current+1]:o.value?[x.value,0]:null),h=v(()=>p.value&&E.value[p.value[0].no-1]);return q([u,g],()=>{h.value&&(h.value.current=p.value[1])},{immediate:!0}),te(),se(()=>{const S=n.value.querySelector("#slide-content"),a=oe(ne()),D=le();q(()=>{if(!D.value||l.value||!we.value)return;const m=S.getBoundingClientRect(),y=(a.x-m.left)/m.width*100,C=(a.y-m.top)/m.height*100;if(!(y<0||y>100||C<0||C>100))return{x:y,y:C}},m=>{_e.cursor=m})}),(S,a)=>{var j;const D=K,m=O,y=X,C=Z;return c(),b(B,null,[e("div",Ae,[e("div",{class:_(["grid-container",`layout${t(he)}`])},[e("div",{ref_key:"main",ref:n,class:"relative grid-section main flex flex-col"},[i(G,{key:"main",class:"h-full w-full p-2 lg:p-4 flex-auto"},{default:$(()=>[i(ge,{"render-context":"presenter"})]),_:1}),(c(),k(qe,{key:(j=t(u))==null?void 0:j.no,"clicks-context":t(r)(t(u)),class:"w-full pb2 px4 flex-none"},null,8,["clicks-context"])),a[4]||(a[4]=e("div",{class:"absolute left-0 top-0 bg-main border-b border-r border-main px2 py1 op50 text-sm"}," Current ",-1))],512),e("div",Ge,[p.value&&h.value?(c(),k(G,{key:"next",class:"h-full w-full"},{default:$(()=>[(c(),k(Se,{is:p.value[0].component,key:p.value[0].no,"clicks-context":h.value,class:_(t(fe)(p.value[0])),route:p.value[0],"render-context":"previewNext"},null,8,["is","clicks-context","class","route"]))]),_:1})):I("",!0),a[5]||(a[5]=e("div",{class:"absolute left-0 top-0 bg-main border-b border-r border-main px2 py1 op50 text-sm"}," Next ",-1))]),(c(),b("div",He,[(c(),k(Ve,{key:`static-${t(d)}`,no:t(d),class:"w-full max-w-full h-full overflow-auto p-2 lg:p-4",style:F({fontSize:`${t($e)}em`}),"clicks-context":t(s)},null,8,["no","style","clicks-context"])),e("div",Ue,[i(H,{title:"Increase font size",onClick:t(ze)},{default:$(()=>[i(D)]),_:1},8,["onClick"]),i(H,{title:"Decrease font size",onClick:t(Fe)},{default:$(()=>[i(m)]),_:1},8,["onClick"]),I("",!0)])])),e("div",We,[i(ye,{persist:!0}),a[6]||(a[6]=e("div",{"flex-auto":""},null,-1)),e("div",{class:"timer-btn my-auto relative w-22px h-22px cursor-pointer text-lg",opacity:"50 hover:100",onClick:a[2]||(a[2]=(...T)=>t(L)&&t(L)(...T))},[i(y,{class:"absolute"}),i(C,{class:"absolute opacity-0"})]),e("div",Ee,z(t(W)),1)]),(c(),k(Me,{key:2}))],2),e("div",Je,[e("div",{class:"progress h-3px bg-primary transition-all",style:F({width:`${(t(d)-1)/(t(M)-1)*100}%`})},null,4)])]),i(Ce),i(be,{modelValue:t(V),"onUpdate:modelValue":a[3]||(a[3]=T=>ae(V)?V.value=T:null)},null,8,["modelValue"])],64)}}}),lt=U(Ke,[["__scopeId","data-v-46875374"]]);export{lt as default};
