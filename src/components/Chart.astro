---
import { Chart } from 'chart.js/auto';

interface Props {
  data: string;
  class?: string;
}

const { data, class: className } = Astro.props;
---

<div class:list={['relative', className]}>
  <canvas id="forecast-chart"></canvas>
</div>

<script define:vars={{ chartData: data }}>
  const ctx = document.getElementById('forecast-chart');
  if (ctx) {
    try {
      const data = JSON.parse(chartData);
      new Chart(ctx, {
        type: 'line',
        data: data,
        options: {
          responsive: true,
          maintainAspectRatio: true,
          plugins: {
            legend: {
              position: 'top',
            },
            title: {
              display: true,
              text: 'Energy Market Forecast'
            }
          }
        }
      });
    } catch (error) {
      console.error('Error creating chart:', error);
    }
  }
</script>